<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
   "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
    <title>Pickle documentation</title>
    <link rel="stylesheet" href="../ldoc.css" type="text/css" />
</head>
<body>

<div id="container">

<div id="product">
	<div id="product_logo"></div>
	<div id="product_name"><big><b></b></big></div>
	<div id="product_description"></div>
</div> <!-- id="product" -->


<div id="main">


<!-- Menu -->

<div id="navigation">
<br/>
<h1>Pickle</h1>

<ul>
  <li><a href="../mw.pickle.html">Index</a></li>
</ul>

<h2>Contents</h2>
<ul>
<li><a href="#Usage">Usage </a></li>
<li><a href="#Methods">Methods </a></li>
</ul>


<h2>Topics</h2>
<ul class="">
  <li><a href="../topics/activities.md.html">Activities</a></li>
  <li><strong>Adapt</strong></li>
  <li><a href="../topics/call-style.md.html">Call style</a></li>
  <li><a href="../topics/change-log.md.html">Log</a></li>
  <li><a href="../topics/databases.md.html">Databases</a></li>
  <li><a href="../topics/dataflow.md.html">Dataflow</a></li>
  <li><a href="../topics/hello-world.md.html">Hello World</a></li>
  <li><a href="../topics/lua-classes.md.html">Lua classes</a></li>
  <li><a href="../topics/musings.md.html">Musings</a></li>
  <li><a href="../topics/page-indicators.md.html">Page indicators</a></li>
  <li><a href="../topics/sources.md.html">Sources</a></li>
  <li><a href="../topics/spies.md.html">Spies</a></li>
  <li><a href="../topics/statistics.md.html">Statistics</a></li>
  <li><a href="../topics/test-anything-protocol.md.html">Test anything protocol</a></li>
  <li><a href="../topics/test-case.md.html">Test Case</a></li>
  <li><a href="../topics/test-doubles.md.html">Test doubles</a></li>
  <li><a href="../topics/testing.md.html">Testing</a></li>
  <li><a href="../topics/tracking-categories.md.html">Tracking categories</a></li>
  <li><a href="../topics/translatewiki.md.html">Translatewiki</a></li>
  <li><a href="../topics/vagrant.md.html">Vagrant</a></li>
  <li><a href="../topics/vscode-extensions.md.html">VScode extension</a></li>
  <li><a href="../topics/vscode-snippets.md.html">VScode snippets</a></li>
</ul>
<h2>Modules</h2>
<ul class="nowrap">
  <li><a href="../modules/Pickle.html">Pickle</a></li>
  <li><a href="../modules/util.html">util</a></li>
</ul>
<h2>Classes</h2>
<ul class="nowrap">
  <li><a href="../classes/Adapt.html">Adapt</a></li>
  <li><a href="../classes/Bag.html">Bag</a></li>
  <li><a href="../classes/Case.html">Case</a></li>
  <li><a href="../classes/Counter.html">Counter</a></li>
  <li><a href="../classes/Double.html">Double</a></li>
  <li><a href="../classes/Extractor.html">Extractor</a></li>
  <li><a href="../classes/Extractors.html">Extractors</a></li>
  <li><a href="../classes/Spy.html">Spy</a></li>
  <li><a href="../classes/Translator.html">Translator</a></li>
  <li><a href="../classes/Translators.html">Translators</a></li>
  <li><a href="../classes/Render.html">Render</a></li>
  <li><a href="../classes/RenderAdapt.html">RenderAdapt</a></li>
  <li><a href="../classes/RenderAdaptCompact.html">RenderAdaptCompact</a></li>
  <li><a href="../classes/RenderAdaptFull.html">RenderAdaptFull</a></li>
  <li><a href="../classes/RenderAdaptVivid.html">RenderAdaptVivid</a></li>
  <li><a href="../classes/RenderCase.html">RenderCase</a></li>
  <li><a href="../classes/RenderCaseCompact.html">RenderCaseCompact</a></li>
  <li><a href="../classes/RenderCaseFull.html">RenderCaseFull</a></li>
  <li><a href="../classes/RenderCaseVivid.html">RenderCaseVivid</a></li>
  <li><a href="../classes/Renders.html">Renders</a></li>
  <li><a href="../classes/Report.html">Report</a></li>
  <li><a href="../classes/ReportAdapt.html">ReportAdapt</a></li>
  <li><a href="../classes/ReportCase.html">ReportCase</a></li>
</ul>
<h2>Examples</h2>
<ul class="nowrap">
  <li><a href="../examples/HelloWorld.pickle.nb.lua.html">HelloWorld.pickle.nb.lua</a></li>
  <li><a href="../examples/HelloWorld.lua.html">HelloWorld.lua</a></li>
  <li><a href="../examples/HelloWorld.pickle.lua.html">HelloWorld.pickle.lua</a></li>
</ul>

</div>

<div id="content">


<h1>Adapt</h1>

<p><em>TODO</em>: Merge in <a href="expect.md.html">expect</a>.</p>

<p>The <a href="../classes/Adapt.html#">Adapt</a> class (<code>subject</code>, <code>expect</code>) defines an <a href="https://en.wikipedia.org/wiki/Assertion_definition_language">assertion definition language</a> used in Pickle, which provides methods that are easy to use and fast to declare as long as the tests has a clearly defined structure. That is, it is a “pickle”.</p>

<p>Tests can be described as series of <a href="https://en.wikipedia.org/wiki/Premise">premises</a>, that must evaluate to a true state. The outcome of a test can be viewed as a sequence of statements that are conjoined together with an <code>and</code>. Because of the <a href="https://en.wikipedia.org/wiki/Logical_conjunction">logical conjunction</a>, the first <a href="https://en.wiktionary.org/wiki/falsy">falsy</a> in the sequence will then imply that any further tests can be dismissed. This is the default case.</p>

<p>In some cases it is only necessary that one of a few tests has a true state. Because of the <a href="https://en.wikipedia.org/wiki/Logical_disjunction">logical disjunction</a>, the first <a href="https://en.wiktionary.org/wiki/truthy">truthy</a> in the sequence will then imply that any further tests can be dismissed.</p>

<p><em>NOTE</em>: It is not clear how the <a href="https://en.wikipedia.org/wiki/Logical_connective">logical connectives</a> should be set for a logical disjunction of assertions, and if a full description (statement, declaration) of the graph is necessary.</p>

<p>The <a href="../classes/Case.html#">Case</a> class (<code>describe</code>, <code>context</code>, <code>it</code>) will put data in a <a href="../classes/Bag.html#">bag</a> <code>subject</code>, with last test case on top. This will then be available to <code>expect</code> for inspection.</p>

<p><em>NOTE</em>: This method of cross-referencing Adapt instances could be dropped in favor of simply accessing the <code>subject</code>, leaving <code>expect</code> for other out-of-order tests.</p>

<p><a name="Usage"></a></p>
<h2>Usage</h2>

<p>Present call works like the following</p>


<pre>
subject( <span class="string">'foo'</span> ) <span class="comment">-- call as part of test case setup
</span><span class="comment">-- some processing
</span><span class="comment">-- ⋮
</span><span class="comment">-- more processing
</span>expect( <span class="string">'string'</span> ):first():asType():toBeSame()
</pre>


<p>The cross-referencing makes the use very opaque, but as most of its use is hidden it does not matter too much.</p>

<p><em>NOTE</em>: Corrected call would be like the following</p>


<pre>
subject( obj ) <span class="comment">-- call as part of test case setup
</span><span class="comment">-- some processing
</span><span class="comment">-- ⋮
</span><span class="comment">-- more processing
</span>subject:first():asType():toBeSame( <span class="string">'string'</span> )
</pre>


<p><a name="Methods"></a></p>
<h2>Methods</h2>

<p>Adapt instances will typically store a set of objects for later retrieval and test on a call graph. Normally the overall outcome should be completely transparent, but the actual result from the method itself will not be available. It is hidden into the overall execution of the call graph.</p>

<p>To load a test instance onto the stack use the table call form, that is <code>subject( ... )</code>. This will store whatever provided on the stack for later retrieval. Those values can be further conditioned and processed with three types of operations; pick a value, transform the value, and evaluate a conditional on the value. The final value is then used for the final outcome of a single premise.</p>

<p>A call graph is used instead of direct execution due to two reasons; <em>out-of-order creation</em> and <em>retrospective inspection</em>.</p>

<p><em>Out-of-order creation</em> allows parts of the call graph to be created without following any strict order, thus allowing more readable statements. Only when all necessary parts are registered, and a final condition called, then the value will be processed and the outcome returned.</p>

<p><em>Retrospective inspection</em> allows processing the final outcome, and then inspecting parts of the overall graph. If we get a specific value, was some other value a correct or invalid type? This can make testing possible in some cases where we can't make hard assumptions about the input values. Most common use case is to invalidate an otherwise failing proposition.</p>

<h3><a id="pick">Pick</a></h3>

<p>This is delayed actions to chose one of several returned values. The delayed action will only return a single value.</p>

<h3><a id="transform">Transform</a></h3>

<p>This is delayed actions to somehow transform a value. The delayed action will return the same value, but somehow transformed.</p>

<h3><a id="condition">Condition</a></h3>

<p>This is delayed actions to compare the values. The delayed action will return a boolean value.</p>


</div> <!-- id="content" -->
</div> <!-- id="main" -->
<div id="about">
<i>generated by <a href="http://github.com/stevedonovan/LDoc">LDoc 1.4.6</a></i>
</div> <!-- id="about" -->
</div> <!-- id="container" -->
</body>
</html>

