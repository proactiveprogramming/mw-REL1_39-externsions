<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
   "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
    <title>Katsa documentation</title>
    <link rel="stylesheet" href="../ldoc.css" type="text/css" />
</head>
<body>

<div id="container">

<div id="product">
	<div id="product_logo"></div>
	<div id="product_name"><big><b></b></big></div>
	<div id="product_description"></div>
</div> <!-- id="product" -->


<div id="main">


<!-- Menu -->

<div id="navigation">
<br/>
<h1>Katsa</h1>


<h2>Contents</h2>
<ul>
<li><a href="#Examples">Examples </a></li>
</ul>


<h2>Topics</h2>
<ul class="">
  <li><strong>Introduction</strong></li>
  <li><a href="../topics/vagrant.md.html">Vagrant</a></li>
  <li><a href="../topics/vscode.md.html">VScode</a></li>
  <li><a href="../topics/CONTRIBUTING.md.html">Contributing</a></li>
  <li><a href="../topics/CODE_OF_CONDUCT.md.html">Code of Conduct</a></li>
  <li><a href="../topics/SECURITY.md.html">Security</a></li>
  <li><a href="../topics/TRANSLATING.md.html">Translating</a></li>
</ul>
<h2>Modules</h2>
<ul class="nowrap">
  <li><a href="../index.html">Spy</a></li>
</ul>
<h2>Examples</h2>
<ul class="nowrap">
  <li><a href="../examples/test.lua.html">test.lua</a></li>
</ul>

</div>

<div id="content">


<h1>Introduction</h1>

<p>Spies in the Katsa extension is modeled as four distinct calls that can be organized along two different dimensions. They are either doing logging or error reporting, and they are either just giving a notification or a stack trace. It is easy to extend the default behavior through use of callbacks, thus keeping the expected behavior. One typical use is to extend the granularity past the just info logging and error reporting.</p>

<p>The intention with this extension is to enable inspection of simple state visits in test doubles, as implemented by the Doppelgänger extension. Intention is not to implement assertions, that is part of the Expect extension.</p>

<p>The name <a href="https://en.wikipedia.org/wiki/Katsa">“katsa”</a> denotes a field intelligence officer in <a href="https://en.wikipedia.org/wiki/Mossad">Mossad</a>, the national intelligence agency of Israel. A katsa collects information and runs agents – spies – like this extension. This extension has software spies that track code execution.</p>

<p><a name="Examples"></a></p>
<h2>Examples</h2>

<p>A core example of a module can be found at <a href="../examples/test.lua.html">Module:Test</a>. This example registers four spies, one for each of <code>carp()</code>, <code>cluck()</code>, <code>croak()</code>, and <code>confess()</code>.</p>

<p>When called they give a resulting output as described by the following. The previous example module and the following wikipages can be loaded by calling <code>composer import</code> in the Katsa extension directory.</p>

<h3>Carp</h3>

<p>The following line should not give a visible output, it should only give output in the console.</p>


<pre>
{{#invoke:Test|carp}}
</pre>

<p>This is the lowest level reporting, it gives only a one-liner, and only in the console.</p>

<h3>Cluck</h3>

<p>The following line should not give a visible output, it should only give output in the console.</p>


<pre>
{{#invoke:Test|cluck}}
</pre>

<p>This is the next level, and it gives an additional stack trace. Still, it is only reporting in the console.</p>

<h3>Croak</h3>

<p>The following line should give an error message reading “Lua error: Croak called: croak croak croak.”</p>


<pre>
{{#invoke:Test|croak}}
</pre>

<p>This is a critical level and moves the reporting from the console and into the output page. Again it is only a one-liner, but in bright red color. Usually this should only be used for critical actions that can't be fulfilled without user interactions.</p>

<h3>Confess</h3>

<p>The following line should give an error message reading “Lua error in Module:Test at line 22: Confess called: confess confess confess.” The line number can change somewhat.</p>


<pre>
{{#invoke:Test|confess}}
</pre>

<p>This is also a critical level and produces an error message in bright red color. It gives a stack trace, and should only be used for critical actions that can't be fulfilled without user interactions.</p>


</div> <!-- id="content" -->
</div> <!-- id="main" -->
<div id="about">
<i>generated by <a href="http://github.com/stevedonovan/LDoc">LDoc TESTING</a></i>
</div> <!-- id="about" -->
</div> <!-- id="container" -->

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-138139619-1"></script>
<script>
	window.dataLayer = window.dataLayer || [];
	function gtag() {
		dataLayer.push(arguments);
	}

	gtag('js', new Date());
	gtag('config', 'UA-138139619-1');
</script>

</body>
</html>

